import{r as i,a0 as g,j as d,z as b,d as y,e as v}from"./index--GjonhCH.js";var S=Symbol.for("react.lazy"),f=g[" use ".trim().toString()];function x(t){return typeof t=="object"&&t!==null&&"then"in t}function h(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===S&&"_payload"in t&&x(t._payload)}function w(t){const e=k(t),r=i.forwardRef((n,o)=>{let{children:s,...a}=n;h(s)&&typeof f=="function"&&(s=f(s._payload));const l=i.Children.toArray(s),u=l.find(_);if(u){const c=u.props.children,m=l.map(p=>p===u?i.Children.count(c)>1?i.Children.only(null):i.isValidElement(c)?c.props.children:null:p);return d.jsx(e,{...a,ref:o,children:i.isValidElement(c)?i.cloneElement(c,void 0,m):null})}return d.jsx(e,{...a,ref:o,children:s})});return r.displayName=`${t}.Slot`,r}var E=w("Slot");function k(t){const e=i.forwardRef((r,n)=>{let{children:o,...s}=r;if(h(o)&&typeof f=="function"&&(o=f(o._payload)),i.isValidElement(o)){const a=P(o),l=C(s,o.props);return o.type!==i.Fragment&&(l.ref=n?b(n,a):a),i.cloneElement(o,l)}return i.Children.count(o)>1?i.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var I=Symbol("radix.slottable");function _(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===I}function C(t,e){const r={...e};for(const n in e){const o=t[n],s=e[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...l)=>{const u=s(...l);return o(...l),u}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...t,...r}}function P(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const R=v("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground shadow-sm border-destructive-border",outline:" border [border-color:var(--button-outline)] shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent",link:"text-primary underline-offset-4 hover:underline"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),T=i.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...o},s)=>{const a=n?E:"button";return d.jsx(a,{className:y(R({variant:e,size:r,className:t})),ref:s,...o})});T.displayName="Button";const $=i.forwardRef(({className:t,type:e,...r},n)=>d.jsx("input",{type:e,className:y("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));$.displayName="Input";const q="/api";class j{constructor(){this.token=null}setToken(e){this.token=e,localStorage.setItem("auth_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("auth_token")),this.token}clearToken(){this.token=null,localStorage.removeItem("auth_token")}async request(e,r={}){const n=this.getToken(),o={"Content-Type":"application/json",...r.headers};n&&(o.Authorization=`Bearer ${n}`);const s=await fetch(`${q}${e}`,{...r,headers:o});if(!s.ok){const a=await s.json().catch(()=>({error:"Error desconocido"}));throw new Error(a.error||`HTTP ${s.status}`)}return s.json()}async login(e,r){const n=await this.request("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:r})});return this.setToken(n.token),n}async bootstrap(){return this.request("/me/bootstrap")}async syncPush(e){return this.request("/sync/push",{method:"POST",body:JSON.stringify({events:e})})}async getVentas(e){const r=new URLSearchParams;e?.rutaId&&r.set("rutaId",e.rutaId.toString()),e?.clienteId&&r.set("clienteId",e.clienteId.toString()),e?.limit&&r.set("limit",e.limit.toString());const n=r.toString();return this.request(`/ventas${n?`?${n}`:""}`)}async getDescuentos(){return this.request("/descuentos")}async createDescuento(e,r,n,o){return this.request("/descuentos",{method:"POST",body:JSON.stringify({clienteId:o||null,productoId:e,tipoDescuento:r,tiers:n})})}async deleteDescuento(e){return this.request(`/descuentos/${e}`,{method:"DELETE"})}async getRutas(){return this.request("/rutas")}async getClientes(e){const r=e?`?rutaId=${e}`:"";return this.request(`/clientes${r}`)}async getProductos(){return this.request("/productos")}async getMovimientos(){return this.request("/movimientos")}async getMovimientosRuta(e,r,n){let o=`/movimientos/ruta/${e}`;const s=new URLSearchParams;return r&&s.append("fechaDesde",r),n&&s.append("fechaHasta",n),s.toString()&&(o+=`?${s.toString()}`),this.request(o)}}const O=new j;export{T as B,$ as I,E as S,O as a,w as c};
